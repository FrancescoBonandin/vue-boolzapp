<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Boolzapp</title>

        <!--Google Fonts-->
        

        <!-- FA -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <!-- Bootstrap -->

        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous"> -->

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        
        
        
        <!-- CSS -->
        <link rel="stylesheet" href="css/palette.css">
        <link rel="stylesheet" href="css/style.css">

        <!-- Axios -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        

        <!-- VUE -->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    </head>
    
    <body >

        
        
        
        <div id="app">
            
            <!-- main -->
            <main @click="specificDataId=null">
                
                <div class="my-container">

                    <div class="wrapper">


                        <div class=" my-row info-bar">

                            <div class=" user-profile">
                                
                                <div class="my-row">
                                    
                                    <div class="img-container">
        
                                        <img class="avatar" :src="user.avatar" alt="">
        
                                    </div>
        
                                    <h3>
                                        {{`${user.firstName} ${user.lastName}`}}
                                    </h3>
        
                                    <div class="profile buttons">

                                        <div>
                                            <i class="fa-solid fa-circle-notch"></i>
                                        </div>

                                        <div>
                                            <i class="fa-solid fa-message"></i>
                                        </div>

                                        <div>
                                            <i class="fa-solid fa-ellipsis-vertical"></i>
                                        </div>

                                    </div>

                                </div>
                            
                            </div>
    
                            <div class=" contact-profile">
                                
                                <div class="my-row">
                                    
                                    <div class="img-container">
        
                                        <img class="avatar" :src="contacts[counter].avatar" :alt="contacts[counter].name">
        
                                    </div>
        
                                    <h3>
                                        {{contacts[counter].name}}
                                    </h3>

                             
                                    <div class="profile buttons">

                                        <div>

                                        <i class="fa-solid fa-magnifying-glass"></i>

                                        </div>

                                        <div>
                                            <i class="fa-solid fa-paperclip"></i>
                                        </div>

                                        <div>
                                            <i class="fa-solid fa-ellipsis-vertical"></i>
                                        </div>

                                    </div>
                                    
                                    
                                </div>

                            </div>

                        </div>

                        <aside class="sidebar">


                            <div class=" wrapper  flex-dir-col">

                                <div class="notification-box my-row">

                                    <div class="img-container">
                                        <i class="fa-solid fa-bell-slash" style="color: #5daddf;"></i>
                                    </div>

                                    <div>

                                        <div>
                                            Lorem ipsum dolor sit amet.
                                        </div>

                                        <a href="#nogo">
                                            Lorem, ipsum dolor.
                                        </a>

                                    </div>
                                </div>

                                <div class="searchbox">
                                    <input @keyup="searchInContacts()" v-model="search" type="search" placeholder="Write here to  search a contact..." name="" id="">
                                </div>

                                <ul v-if="search==''" class="chat-list flex-dir-col">

                                    <li @click="()=>{counter=index}" v-for="(singleChat,index) in contacts" class=" single-chat my-row" :class="(counter == index)? 'active':'' ">

                                        <div class="img-container">
                                            <img class="avatar" :src="singleChat.avatar" :alt="singleChat.name">
                                        </div>


                                        <div class="chat-info">

                                            <h3>
                                                {{singleChat.name}}
                                            </h3>
    
                                            <div class=" chat-last-message">
                                                
                                                <span>

                                                    {{singleChat.messages[singleChat.messages.length-1].message}}

                                                </span>
                                                
                                                <small class="date">
                                                    {{singleChat.messages[singleChat.messages.length-1].date.split(" ")[0]}}
                                                </small>
        
                                                <small class="date">
                                                    {{singleChat.messages[singleChat.messages.length-1].date.split(" ")[1]}}
                                                </small>

                                            </div>

                                        </div>

                                    </li>

                                </ul>

                                <ul v-else class="chat-list flex-dir-col filtered">

                                    <li @click="()=>{counter=index}" v-for="(singleChat,index) in filteredContacts" class="my-row" >

                                        <div class="img-container">
                                            <img class="avatar" :src="singleChat.avatar" :alt="singleChat.name">
                                        </div>

                                        <div class="chat-info">

                                            <h3>
                                                {{singleChat.name}}
                                            </h3>
    
                                            <div class=" chat-last-message">
                                                    
                                                <span>
    
                                                    {{singleChat.messages[singleChat.messages.length-1].message}}
    
                                                </span>
                                                
                                                <small class="date">
                                                    {{singleChat.messages[singleChat.messages.length-1].date.split(" ")[0]}}
                                                </small>
        
                                                <small class="date">
                                                    {{singleChat.messages[singleChat.messages.length-1].date.split(" ")[1]}}
                                                </small>
    
                                            </div>

                                        </div>

                                    </li>

                                </ul>

                            </div>

                        </aside>

                        <div class="chat">


                            <div class="chat-log ">

                                <div  v-for="(singleMessage,index) in contacts[counter].messages" class="my-row"
                                    :class=" { 'sent' : singleMessage.status == 'sent', 'received' : singleMessage.status =='received' } ">
                                    
                                    <div @click.right.stop.prevent="getDataId(index)" :my-dataid="index" >
              
                                        <span>
                                            {{singleMessage.message}}
                                        </span>

                                        <small class="date">
                                            {{singleMessage.date.split(" ")[0]}}
                                        </small>

                                        <small class="date">
                                            {{singleMessage.date.split(" ")[1]}}
                                        </small>

                                        <ul v-if="specificDataId==index" 
                                            class="message-menu" >

                                            <li >
                                                info messaggio
                                            </li>

                                            <li  @click="deleteMessage(index)">
                                                delete message
                                            </li>

                                        </ul>

                                    </div>
                                    
                                </div>



                            </div>

                            <div class="chat-input-container my-row">
                                
                                <div>
                                 <i class="fa-regular fa-face-smile"></i>
                                </div>

                                <input @keyup.enter="sendNewMessage()" v-model="newMessage" placeholder="New message..." style="width: 80%;" type="text" name="" id="">

                                <div>
                                    <i class="fa-solid fa-microphone"></i>
                                </div>

                            </div>


                        </div>

                    </div>
                    
                    
                </div>
                
            </main>
            <!-- fine main -->
            
        </div>

    
        
      
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        <script src="js/my-script.js"></script>
    </body>

</html>